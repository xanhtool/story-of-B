{"version":3,"file":"main.e9b19296d7a51e30ce00.bundle.js","sources":["webpack:///./src/app/views/pos/views/pos-home/dumb/popup-edit-cart-item/popup-edit-cart-item.component.ts"],"sourcesContent":["import { Component, OnInit, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-popup-edit-cart-item',\r\n  template: require('./popup-edit-cart-item.component.html'),\r\n  styles: [require('./popup-edit-cart-item.component.scss')]\r\n})\r\nexport class PopupEditCartItemComponent implements OnInit {\r\n  editCartForm: FormGroup;\r\n  inventory = 10;\r\n  showNotiOver = false;\r\n  constructor(\r\n    public fb: FormBuilder,\r\n    public dialogRef: MatDialogRef<PopupEditCartItemComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    console.log(this.data);\r\n    this.initForm();\r\n    if (this.data) {\r\n      this.setFormValue();\r\n    }\r\n  }\r\n\r\n  initForm() {\r\n    this.editCartForm = this.fb.group({\r\n      quantity: [1, Validators.required],\r\n      price: [0, Validators.required],\r\n      staff: ['', Validators.required],\r\n      serviceComission: [false, Validators.required],\r\n      discount: [0, Validators.required],\r\n      note: ['', Validators.required]\r\n    })\r\n  }\r\n\r\n  checkInventory(quantity){\r\n    console.log('quantity', quantity)\r\n    if(quantity > this.inventory){\r\n      this.editCartForm.patchValue({\r\n        quantity : this.inventory\r\n      })\r\n      this.showNotiOver = true;\r\n    }else{\r\n      this.showNotiOver = false;\r\n    }\r\n  }\r\n\r\n  turnOffNoti(){\r\n    this.showNotiOver = false;\r\n  }\r\n\r\n  actionChangeQuantity(value) {\r\n    let quantity = this.editCartForm.controls['quantity'].value;\r\n    if ((quantity + value) <= this.inventory) {\r\n      this.showNotiOver = false;\r\n      if ((quantity + value) > 0) {\r\n        this.editCartForm.patchValue({\r\n          quantity: quantity + value\r\n        })\r\n      }\r\n    } else {\r\n      this.showNotiOver = true;\r\n    }\r\n  }\r\n\r\n  setFormValue() {\r\n    this.editCartForm.patchValue({\r\n      quantity: 1,\r\n      price: this.data.price,\r\n      staff: this.data.staff\r\n    })\r\n  }\r\n\r\n  closePopupEditCartItem() {\r\n    this.dialogRef.close();\r\n  }\r\n  \r\n  saveChanges() {\r\n    // this.closePopupEditCartItem();\r\n    console.log(this.editCartForm.value);\r\n  }\r\n}\r\n"],"mappings":"AASA","sourceRoot":""}